<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pokemon PvP Analyzer</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div class="header-text">
                    <h1>Pokemon PvP Analyzer</h1>
                    <p>Get weaknesses, resistances, moves, and battle simulations for any Pokemon</p>
                </div>
                <button id="helpBtn" class="help-button" title="Help & Guide">
                    <span class="help-icon">?</span>
                    <span class="help-text">Help</span>
                </button>
            </div>
        </header>

        <!-- Main Flex Layout for PvP Team Builder -->
        <div class="main-flex-container">
            <!-- Opponent Panel -->
            <div class="panel opponent-panel">
                <div class="search-section">
                    <div class="search-container">
                        <input type="text" id="pokemonSearch" placeholder="Enter Pokemon name..." autocomplete="off">
                        <button id="searchBtn">Search</button>
                    </div>
                    <div id="searchResults" class="search-results"></div>
                </div>

                <div id="pokemonInfo" class="pokemon-info hidden">
                    <div class="pokemon-header">
                        <img id="pokemonSprite" src="" alt="Pokemon sprite">
                        <div class="pokemon-details">
                            <h2 id="pokemonName"></h2>
                            <div id="pokemonTypes" class="types"></div>
                            <div class="stats">
                                <span id="pokemonHP">HP: --</span>
                                <span id="pokemonAttack">ATK: --</span>
                                <span id="pokemonDefense">DEF: --</span>
                            </div>
                        </div>
                    </div>
                    <div class="effectiveness-section">
                        <h4>Weaknesses</h4>
                        <div class="effectiveness-weaknesses"></div>
                        <h4>Resistances</h4>
                        <div class="effectiveness-resistances"></div>
                    </div>
                </div>

                <div class="moves-container">
                    <div id="movesList" class="moves-list"></div>
                </div>
            </div>
            <!-- Team Panel -->
            <div class="panel team-panel">
                <div class="team-section">
                    <h3>Your Team</h3>
                    
                    <!-- Battle Settings Row -->
                    <div class="battle-settings-row">
                        <!-- League Selection -->
                        <div class="league-selector-compact">
                            <label for="leagueSelect">League:</label>
                            <select id="leagueSelect" class="league-dropdown">
                                <option value="500">Little Cup (500 CP)</option>
                                <option value="1500" selected>Great League (1500 CP)</option>
                                <option value="2500">Ultra League (2500 CP)</option>
                                <option value="0">Master League (No CP Cap)</option>
                            </select>
                        </div>
                        
                        <!-- Shield AI Strategy Selector -->
                        <div class="strategy-selector-compact">
                            <label for="shieldAI">Strategy:</label>
                            <select id="shieldAI" class="strategy-dropdown">
                                <option value="smart_30">Smart (30% damage)</option>
                                <option value="smart_20">Aggressive (20% damage)</option>
                                <option value="smart_50">Conservative (50% damage)</option>
                                <option value="balanced">Balanced</option>
                                <option value="conservative">Very Conservative</option>
                                <option value="aggressive">Very Aggressive</option>
                                <option value="always">Always Shield</option>
                                <option value="never">Never Shield</option>
                            </select>
                        </div>
                        
                        <!-- Shield Selector -->
                        <div class="shield-selector-compact">
                            <label>Shields:</label>
                            <div class="shield-slider-container">
                                <input type="range" id="shieldSlider" min="0" max="2" value="2" class="shield-slider">
                                <span id="shieldValue">2</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="team-slots">
                        <div class="team-slot" data-slot="1">
                            <div class="slot-content">
                                <div class="add-pokemon">
                                    <span class="plus-icon">+</span>
                                    <span class="add-text">Add Pokemon</span>
                                </div>
                            </div>
                        </div>
                        <div class="team-slot" data-slot="2">
                            <div class="slot-content">
                                <div class="add-pokemon">
                                    <span class="plus-icon">+</span>
                                    <span class="add-text">Add Pokemon</span>
                                </div>
                            </div>
                        </div>
                        <div class="team-slot" data-slot="3">
                            <div class="slot-content">
                                <div class="add-pokemon">
                                    <span class="plus-icon">+</span>
                                    <span class="add-text">Add Pokemon</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Analysis Panel -->
            <div class="panel analysis-panel">
                <div class="team-analysis" id="teamAnalysis">
                    <h3>Team Analysis</h3>
                    <div class="analysis-content">
                        <!-- Opponent's Moves vs Your Team Table -->
                        <div id="opponentMatchupTable"></div>
                        <!-- Team Coverage Section -->
                        <div class="coverage-section">
                            <h4>Type Coverage</h4>
                            <div id="teamCoverage" class="coverage-grid"></div>
                        </div>
                        
                        <!-- Team Weaknesses Section -->
                        <div class="team-weaknesses-section">
                            <h4>Team Weaknesses</h4>
                            <div id="teamWeaknesses" class="team-weaknesses-list"></div>
                        </div>
                        
                        <!-- Team Strengths Section -->
                        <div class="team-strengths-section">
                            <h4>Team Strengths</h4>
                            <div id="teamStrengths" class="team-strengths-list"></div>
                        </div>
                        
                        <!-- Missing Coverage Section -->
                        <div class="missing-coverage-section">
                            <h4>Missing Coverage</h4>
                            <div id="missingCoverage" class="missing-coverage-list"></div>
                        </div>
                        

                    </div>
                </div>
            </div>
        </div>

        <div id="loading" class="loading hidden">
            <div class="spinner"></div>
            <p>Loading Pokemon data...</p>
        </div>

        <div id="error" class="error hidden">
            <p>Pokemon not found. Please try again.</p>
        </div>

        <div id="teamModal" class="modal hidden">
            <div class="modal-content">
                <button class="modal-close" id="closeTeamModal">×</button>
                <h2>Select a Pokemon</h2>
                <input type="text" id="teamModalSearch" placeholder="Search Pokemon..." autocomplete="off">
                <div id="teamModalResults" class="modal-results"></div>
            </div>
        </div>

        <!-- Help Modal -->
        <div id="helpModal" class="modal hidden">
            <div class="modal-content help-modal-content">
                <button class="modal-close" id="closeHelpModal">×</button>
                <div class="help-header">
                    <h2>Pokemon PvP Analyzer - Help & Guide</h2>
                    <p>Learn how to use all the features of this PvP battle simulator</p>
                </div>
                
                <div class="help-content">
                    <div class="help-section">
                        <h3>🎯 Getting Started</h3>
                        <div class="help-item">
                            <h4>Search for Pokemon</h4>
                            <p>Use the search bar in the left panel to find any Pokemon. Type the name and select from the dropdown results. The Pokemon's stats, moves, type effectiveness, and best PvP moves will be displayed.</p>
                        </div>
                        
                        <div class="help-item">
                            <h4>Build Your Team</h4>
                            <p>Click the "+" buttons in the "Your Team" section to add Pokemon to your team. You can add up to 3 Pokemon for comprehensive team analysis and battle simulations.</p>
                        </div>
                        
                        <div class="help-item">
                            <h4>Understanding the Layout</h4>
                            <ul>
                                <li><strong>Left Panel:</strong> Search and analyze opponent Pokemon</li>
                                <li><strong>Middle Panel:</strong> Build and manage your team</li>
                                <li><strong>Right Panel:</strong> View team analysis and coverage</li>
                            </ul>
                        </div>
                    </div>

                    <div class="help-section">
                        <h3>⚔️ Battle Simulations</h3>
                        <div class="help-item">
                            <h4>Battle Settings</h4>
                            <p>Configure your battle simulations using the three settings in the middle panel:</p>
                            <ul>
                                <li><strong>League:</strong> Choose CP cap (500, 1500, 2500, or Master League)</li>
                                <li><strong>Strategy:</strong> Select AI shield usage behavior</li>
                                <li><strong>Shields:</strong> Set number of shields (0-2) for both players</li>
                            </ul>
                        </div>
                        
                        <div class="help-item">
                            <h4>Automatic Analysis</h4>
                            <p>Once you have an opponent Pokemon and at least one team member, battle simulations run automatically. The best counter will be highlighted with a green border.</p>
                        </div>
                    </div>

                    <div class="help-section">
                        <h3>🛡️ Shield AI Strategies</h3>
                        <p>Choose how the AI decides when to use shields during battles:</p>
                        
                        <div class="strategy-grid">
                            <div class="strategy-card">
                                <h4>Smart Strategies</h4>
                                <ul>
                                    <li><strong>Smart (30%):</strong> Shields when incoming damage exceeds 30% of max HP</li>
                                    <li><strong>Aggressive (20%):</strong> Shields when damage > 20% of max HP</li>
                                    <li><strong>Conservative (50%):</strong> Shields when damage > 50% of max HP</li>
                                </ul>
                            </div>
                            
                            <div class="strategy-card">
                                <h4>Advanced Strategies</h4>
                                <ul>
                                    <li><strong>Balanced:</strong> Considers type effectiveness and opponent's energy</li>
                                    <li><strong>Very Conservative:</strong> Saves shields for high-damage moves</li>
                                    <li><strong>Very Aggressive:</strong> Uses shields early to maintain pressure</li>
                                </ul>
                            </div>
                            
                            <div class="strategy-card">
                                <h4>Simple Strategies</h4>
                                <ul>
                                    <li><strong>Always Shield:</strong> Uses shields whenever available</li>
                                    <li><strong>Never Shield:</strong> Never uses shields</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="help-section">
                        <h3>📊 Understanding Results</h3>
                        <div class="help-item">
                            <h4>Battle Rating</h4>
                            <p>The battle rating shows how well your Pokemon performs:</p>
                            <ul>
                                <li><strong>0.9+ (Excellent):</strong> Dominant win</li>
                                <li><strong>0.7-0.9 (Good):</strong> Comfortable win</li>
                                <li><strong>0.5-0.7 (Close):</strong> Narrow win</li>
                                <li><strong>0.3-0.5 (Neutral):</strong> Close loss</li>
                                <li><strong>0.1-0.3 (Bad):</strong> Significant loss</li>
                                <li><strong>0.0-0.1 (Terrible):</strong> Complete loss</li>
                            </ul>
                        </div>
                        
                        <div class="help-item">
                            <h4>Type Effectiveness</h4>
                            <p>Type badges show effectiveness with color coding:</p>
                            <ul>
                                <li><span class="type-badge type-fire">Fire</span> Super effective (2x damage)</li>
                                <li><span class="type-badge type-normal">Normal</span> Normal effectiveness (1x damage)</li>
                                <li><span class="type-badge type-steel">Steel</span> Not very effective (0.5x damage)</li>
                                <li><span class="type-badge type-ghost">Ghost</span> Immune (0x damage)</li>
                            </ul>
                            <p><strong>Resistances:</strong> Your Pokemon's resistances are shown with colored borders indicating resistance level (single, double, or triple).</p>
                        </div>
                    </div>

                    <div class="help-section">
                        <h3>🔧 Tips & Tricks</h3>
                        <div class="help-item">
                            <h4>Team Building</h4>
                            <ul>
                                <li>Check the right panel for team coverage analysis</li>
                                <li>Look for missing coverage types in your team</li>
                                <li>Test your team against common meta Pokemon</li>
                                <li>Consider type synergies and resistances</li>
                                <li>Use the "Opponent's Moves vs Your Team" table to identify threats</li>
                            </ul>
                        </div>
                        
                        <div class="help-item">
                            <h4>Battle Strategy</h4>
                            <ul>
                                <li>Use shield AI strategies that match your playstyle</li>
                                <li>Test different shield scenarios (0, 1, or 2 shields)</li>
                                <li>Watch for the green border indicating your best counter</li>
                                <li>Consider energy management and move timing</li>
                                <li>Use the battle rating to assess matchup quality</li>
                            </ul>
                        </div>
                        
                        <div class="help-item">
                            <h4>Advanced Features</h4>
                            <ul>
                                <li>Click on moves to edit them for custom analysis</li>
                                <li>Use the league selector to test different formats</li>
                                <li>Check team weaknesses to identify coverage gaps</li>
                                <li>Review team strengths to understand your advantages</li>
                            </ul>
                        </div>
                    </div>

                    <div class="help-section">
                        <h3>📚 Resources & Credits</h3>
                        <div class="help-item">
                            <h4>Data Sources</h4>
                            <p>This application uses battle simulation data and algorithms based on <a href="https://pvpoke.com/" target="_blank" rel="noopener">PvPoke</a>, the premier Pokemon Go PvP resource. Special thanks to the PvPoke team for their excellent work in the Pokemon Go PvP community.</p>
                            <p>Pokemon species and move data is provided by <a href="https://pokeapi.co/" target="_blank" rel="noopener">PokeAPI</a>.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- Footer -->
    <footer class="app-footer">
        <div class="footer-content">
            <p>&copy; 2024 Pokemon PvP Analyzer | Powered by <a href="https://pvpoke.com/" target="_blank" rel="noopener">PvPoke</a> battle data</p>
        </div>
    </footer>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html> 